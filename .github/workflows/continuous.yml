name: continuous

on: [push]

jobs:
  windows-latest:
    name: windows-latest
    runs-on: windows-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v1
      - name: Run './build.cmd PublishGitHubRelease'
        run: ./build.cmd PublishGitHubRelease
        env:
            GitHubAuthenticationToken: ${{ secrets.GITHUB_TOKEN }}
      - name: Code signing
        uses: DanaBear/code-sign-action@v4
        with:
            certificate: '${{ secrets.CODE_SIGNING_CERT_BASE64 }}'
            password: '${{ secrets.CODE_SIGNING_CERT_PASSWORD }}'
            certificatesha1: '${{ secrets.CODE_SIGNING_CERT_SHA1 }}'
            folder: 'output'
            recursive: true
